extends layout
block page
	- var menu = 'index'
block content
	- var dataString = JSON.stringify(data)
	- var dotString = JSON.stringify(dots)
	input(type='hidden', class='data-json-dots', value= dotString)
	input(type='hidden', class='data-json', value= dataString)
	if (data.length === 0)
		form(action="/add", method="POST", role="form")
			div.form-group
				label(for="symbol") Add a stock:
				input.form-control(name="symbol", type="text")
			button.btn.btn-primary(type="submit") Add
	else
		div.row
			div#chart.col-xs-12(class='vis')
				div.tt
					
		div.row
			div.col-xs-12.col-md-6
				form.form-horizontal(action="/add", method="POST", role="form")
					div.input-group
						input.form-control(name="symbol", type="text")
						div.input-group-addon
							button.btn.btn-sm.nomargin(type="submit") Add
		
			div.col-xs-12.col-md-6
				each val, index in data
					div.col-xs-12.col-sm-6
						div.panel.panel-sm.panel-default(id="stock_tab_"+val.key+"")
							div.panel-body.row
								h6.col-xs-9.col-md-8 #{val.name}
								div.col-xs-3.col-md-4
									button.btn.btn-block(id=""+val.key+"", role="button", type="submit", class="remove") x
		
	script(type="text/javascript").
		$(document).on('click', '.remove', function(){
			var thiskey = $(this).attr('id');
			$.ajax({
				url: '/delete/' + thiskey,
				type: 'DELETE',
				success: function(data, status, xhr) {
					$('#stock_tab_'+thiskey+'').remove();
				}
			});
		});
		