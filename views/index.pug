extends layout
block page
	- var menu = 'index'
block content
	- var dataString = JSON.stringify(data)
	- var dotString = JSON.stringify(dots)
	input(type='hidden', class='data-json-dots', value= dotString)
	input(type='hidden', class='data-json', value= dataString)
	
	div.row
		div#chart.col-xs-12(class='vis')
			div.tt
				
	div.row
		form(action="/add", method="POST", role="form")
			div.col-xs-6
				h6 Choose a date range:
				div.col-xs-5
					div.form-group
						div.input-group.date#start_date
							input#start_date.form-control(type="text", name="start_date", data-provide="datepicker")
							span.input-group-addon
								span.glyphicon.glyphicon-calendar
				h6.col-xs-2 to
				div.col-xs-5
					div.form-group
						div.input-group.date#end_date
							input#end_date.form-control(type="text", name="end_date", data-provide="datepicker")
							span.input-group-addon
								span.glyphicon.glyphicon-calendar
		
					
			div.col-xs-6
				h6 Add a stock:
				div.input-group.col-xs-12
					input.form-control(name="symbol", type="text")
					div.input-group-addon
						button.btn.btn-sm.nomargin(type="submit") Add
	
	div.row
		each val, index in data
			div.col-xs-12.col-sm-6.col-md-4
				div.panel.panel-sm.panel-default(id="stock_tab_"+val.key+"")
					div.panel-body.row
						h6.col-xs-9.col-md-8 #{val.name}
						div.col-xs-3.col-md-4
							button.btn.btn-block(id=""+val.key+"", role="button", type="submit", class="remove") x
		
	script(type="text/javascript").
		$(document).on('click', '.remove', function(){
			var thiskey = $(this).attr('id');
			$.ajax({
				url: '/delete/' + thiskey,
				type: 'DELETE',
				success: function(data, status, xhr) {
					$('#stock_tab_'+thiskey+'').remove();
				}
			});
		});
		$('#start_date').val();      
		$('#end_date').val();
		$('#start_date').datepicker({
			daysOfWeekDisabled: [0,6],
			beforeShowMonth: false,
			endDate: "0d",
			format: function(date) {
				return new Date(date)
			},
			keyboardNavigation: false,
		    autoclose: true
		})
		$('#end_date').datepicker({
			daysOfWeekDisabled: [0,6],
			useCurrent: false,
			endDate: "0d",
			todayBtn: "linked",
			format: function(date) {
				return new Date(date)
			},
			keyboardNavigation: false,
		    autoclose: true
		})
		
		